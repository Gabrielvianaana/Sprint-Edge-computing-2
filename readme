# üèüÔ∏è Projeto Fantasy - Integra√ß√£o IoT com FIWARE Orion

Este projeto demonstra a integra√ß√£o entre um **dispositivo IoT (ESP32 simulado no Wokwi)** e o **FIWARE Orion Context Broker**, utilizando o protocolo HTTP para consultar informa√ß√µes armazenadas na nuvem.  
O objetivo √© simular a leitura de um cart√£o (RFID) e exibir os dados da jogadora cadastrada no **Orion** em um **display LCD I2C**, com base no UID do cart√£o.

---

## üì° Tecnologias Utilizadas

- **ESP32** (simulado no [Wokwi](https://wokwi.com/))
- **C++ (Arduino IDE)**
- **FIWARE Orion Context Broker**
- **IoT Agent MQTT (porta 4041)**
- **ArduinoJson** ‚Äî tratamento de respostas JSON
- **LiquidCrystal_I2C** ‚Äî exibi√ß√£o de dados no display
- **HTTPClient / WiFi.h** ‚Äî comunica√ß√£o de rede

---

## ‚öôÔ∏è Funcionamento do Projeto

1. O ESP32 conecta-se √† rede **Wokwi-GUEST**.
2. O bot√£o ‚ÄúSCAN‚Äù simula a leitura de um cart√£o.
3. O c√≥digo envia uma requisi√ß√£o `GET` ao **Orion Context Broker**:

4. O Orion responde com um JSON contendo os dados da jogadora:
```json
{
  "id": "Player_01",
  "type": "Jogadora",
  "nome": "Marta",
  "time": "Selecao",
  "posicao": "Atacante"
}
Jogadora:
Marta

üß© Estrutura do C√≥digo

setup(): configura LCD, Wi-Fi e bot√£o.

loop(): aguarda o pressionamento do bot√£o SCAN.

consultarFIWARE(uid): realiza a requisi√ß√£o HTTP ao Orion e trata o retorno.

| Etapa | Origem        | Destino              | Porta | Descri√ß√£o                     |
| ----- | ------------- | -------------------- | ----- | ----------------------------- |
| 1     | ESP32 (Wokwi) | Orion Context Broker | 1026  | Consulta os dados da entidade |
| 2     | Orion         | ESP32                | 1026  | Retorna o JSON da jogadora    |
| 3     | ESP32         | LCD I2C              | 0x27  | Exibe nome da jogadora        |


| Mensagem no LCD | Causa Prov√°vel                | Solu√ß√£o                                                       |
| --------------- | ----------------------------- | ------------------------------------------------------------- |
| `Timeout/Net`   | IP/porta do Orion inacess√≠vel | Use IP **p√∫blico** e libere porta **1026/tcp** no firewall    |
| `UID n/cad`     | Entidade n√£o encontrada       | Verifique se o `id`, `type` e `servicePath` batem com o Orion |
| `Erro JSON`     | Retorno inv√°lido do Orion     | Cheque se o JSON est√° no formato `keyValues`                  |
| `Sem WiFi`      | Rede Wokwi n√£o conectada      | Verifique SSID e status do Wi-Fi                              |


üåê Configura√ß√£o do FIWARE (Postman)

As requisi√ß√µes no Postman devem seguir o mesmo service e servicePath:

Headers:

Fiware-Service: fantasy
Fiware-ServicePath: /jogadoras


Cria√ß√£o de entidade:

POST http://<IP_PUBLICO>:1026/v2/entities
{
  "id": "Player_01",
  "type": "Jogadora",
  "nome": {"type": "Text", "value": "Marta"},
  "time": {"type": "Text", "value": "Selecao"},
  "posicao": {"type": "Text", "value": "Atacante"}
}

üß∞ Componentes Simulados no Wokwi
Componente	Fun√ß√£o
ESP32	Microcontrolador principal
LCD 16x2 I2C	Exibi√ß√£o dos dados da jogadora
Bot√£o	Simula leitura do cart√£o
Rede Wi-Fi	Conex√£o com a internet e Orion

üöÄ Como Executar

Abra o projeto no Wokwi
.

Configure o IP p√∫blico da sua VM no c√≥digo:

const char* BROKER_HOST = "SEU_IP_PUBLICO";


Inicie o Orion Context Broker e IoT Agent na VM.

Clique em RUN no Wokwi e pressione o bot√£o SCAN.

Veja o nome da jogadora aparecer no LCD!


üèÅ Licen√ßa

Este projeto √© distribu√≠do sob a licen√ßa MIT.
Sinta-se livre para usar, modificar e compartilhar.